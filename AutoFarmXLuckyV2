loadstring((function(b64) local chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'; local result = ''; local val = 0; local valb = -8; for i = 1, #b64 do local c = b64:sub(i,i); if c ~= '=' then local pos = chars:find(c) - 1; val = val * 64 + pos; valb = valb + 6; if valb >= 0 then result = result .. string.char(math.floor(val / 2^valb) % 256); val = val % 2^valb; valb = valb - 8; end; end; end; return result; end)("bG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFJlcGxpY2F0ZWRTdG9yYWdlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpCmxvY2FsIFRlbGVwb3J0U2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIikKbG9jYWwgSHR0cFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIkh0dHBTZXJ2aWNlIikKCmxvY2FsIFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgQ2hhcmFjdGVyID0gUGxheWVyLkNoYXJhY3RlciBvciBQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCmxvY2FsIEhSUCA9IENoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQpsb2NhbCBIdW1hbm9pZCA9IENoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKCmdldGdlbnYoKS5TdHVmZiA9IHsKICAgIFRlbGVwb3J0QnlwYXNzID0gdHJ1ZSwKICAgIEl0ZW1NYWduaXR1ZGVCeXBhc3MgPSB0cnVlLAogICAgQ3Jhc2hCeXBhc3MgPSB0cnVlLAogICAgQXV0b0Zhcm0gPSB0cnVlLAogICAgQXV0b1NlbGwgPSB0cnVlLAogICAgUHVyY2hhc2VMdWNreSA9IHRydWUKfQoKbG9jYWwgYmxhY2tsaXN0ID0geyJEaXNjIiwiQm9uZSIsIkFybSIsIlVtYnJlbGxhIiwiU2N5dGhlIiwiU2N5dGgiLCJQbHVjayIsIkxpZ2giLCJUZWEiLCJCb3ciLCJLb2ljaGkiLCJSZXF1aWVtIiwiQmFieSIsIlJlZGVtbWVkIiwiTHVja3kiLCJMdWNrIn0KCmxvY2FsIGZ1bmN0aW9uIGlzQmxhY2tsaXN0ZWQodG9vbE5hbWUpCiAgICBmb3IgXyx3b3JkIGluIGlwYWlycyhibGFja2xpc3QpIGRvCiAgICAgICAgaWYgc3RyaW5nLmZpbmQodG9vbE5hbWUsIHdvcmQpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIGZhbHNlCmVuZAoKbG9jYWwgZnVuY3Rpb24gVGVsZXBvcnRCeXBhc3MoKQogICAgaWYgZ2V0Z2VudigpLlN0dWZmLlRlbGVwb3J0QnlwYXNzIHRoZW4KICAgICAgICBsb2NhbCBPbGROYW1lY2FsbFRQCiAgICAgICAgT2xkTmFtZWNhbGxUUCA9IGhvb2ttZXRhbWV0aG9kKGdhbWUsICJfX25hbWVjYWxsIiwgZnVuY3Rpb24oc2VsZiwgLi4uKQogICAgICAgICAgICBsb2NhbCBhcmdzID0gey4uLn0KICAgICAgICAgICAgbG9jYWwgbWV0aG9kID0gZ2V0bmFtZWNhbGxtZXRob2QoKQogICAgICAgICAgICBpZiBtZXRob2QgPT0gIkludm9rZVNlcnZlciIgYW5kIGFyZ3NbMV0gPT0gImlka2xvbGJyYWgyZGUiIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiAiICBfX19YUCBERSBLRVkiCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm4gT2xkTmFtZWNhbGxUUChzZWxmLCAuLi4pCiAgICAgICAgZW5kKQogICAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gSXRlbU1hZ25pdHVkZUJ5cGFzcygpCiAgICBpZiBnZXRnZW52KCkuU3R1ZmYuSXRlbU1hZ25pdHVkZUJ5cGFzcyB0aGVuCiAgICAgICAgbG9jYWwgT2xkSW5kZXhJdGVtCiAgICAgICAgT2xkSW5kZXhJdGVtID0gaG9va21ldGFtZXRob2QoUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiwgIl9faW5kZXgiLCBmdW5jdGlvbihzZWxmLCBrZXkpCiAgICAgICAgICAgIGlmIG5vdCBjaGVja2NhbGxlcigpIGFuZCBrZXk6bG93ZXIoKSA9PSAibWFnbml0dWRlIiBhbmQgZ2V0Y2FsbGluZ3NjcmlwdCgpLk5hbWUgPT0gIkl0ZW1TcGF3biIgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiBPbGRJbmRleEl0ZW0oc2VsZiwga2V5KQogICAgICAgIGVuZCkKICAgIGVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIENyYXNoQnlwYXNzKCkKICAgIGlmIGdldGdlbnYoKS5TdHVmZi5DcmFzaEJ5cGFzcyB0aGVuCiAgICAgICAgbG9jYWwgRnVuY3Rpb25MaWJyYXJ5ID0gcmVxdWlyZShSZXBsaWNhdGVkU3RvcmFnZTpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKS5GdW5jdGlvbkxpYnJhcnkpCiAgICAgICAgbG9jYWwgT2xkUGNhbGwgPSBGdW5jdGlvbkxpYnJhcnkucGNhbGwKICAgICAgICBGdW5jdGlvbkxpYnJhcnkucGNhbGwgPSBmdW5jdGlvbiguLi4pCiAgICAgICAgICAgIGxvY2FsIGYgPSAuLi4KICAgICAgICAgICAgaWYgdHlwZShmKSA9PSAiZnVuY3Rpb24iIGFuZCAjZ2V0dXB2YWx1ZXMoZikgPT0gMTEgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm4gT2xkUGNhbGwoLi4uKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gUmFuZG9tRXF1aXBUb29sKCkKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBnZXRnZW52KCkuU3R1ZmYuQXV0b0Zhcm0gYW5kIENoYXJhY3RlciBhbmQgSHVtYW5vaWQgZG8KICAgICAgICAgICAgbG9jYWwgQmFja3BhY2sgPSBQbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIkJhY2twYWNrIikKICAgICAgICAgICAgaWYgQmFja3BhY2sgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdG9vbHMgPSB7fQogICAgICAgICAgICAgICAgZm9yIF8sdiBpbiBpcGFpcnMoQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiVG9vbCIpIGFuZCBub3QgaXNCbGFja2xpc3RlZCh2Lk5hbWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRvb2xzLHYpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmICN0b29scz4wIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0b29sID0gdG9vbHNbbWF0aC5yYW5kb20oMSwjdG9vbHMpXQogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgSHVtYW5vaWQ6RXF1aXBUb29sKHRvb2wpCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCgpsb2NhbCBmdW5jdGlvbiBBdXRvU2VsbCgpCiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgZ2V0Z2VudigpLlN0dWZmLkF1dG9TZWxsIGRvCiAgICAgICAgICAgIGxvY2FsIExpdmluZyA9IHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIikKICAgICAgICAgICAgaWYgTGl2aW5nIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIFRhcmdldCA9IExpdmluZzpGaW5kRmlyc3RDaGlsZChQbGF5ZXIuTmFtZSkKICAgICAgICAgICAgICAgIGlmIFRhcmdldCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgRXZlbnQgPSBUYXJnZXQ6RmluZEZpcnN0Q2hpbGQoIlJlbW90ZUV2ZW50IikKICAgICAgICAgICAgICAgICAgICBpZiBFdmVudCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50OkZpcmVTZXJ2ZXIoIkVuZERpYWxvZ3VlIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5QQyA9ICJNZXJjaGFudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT3B0aW9uID0gIk9wdGlvbjIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpYWxvZ3VlID0gIkRpYWxvZ3VlNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCgpsb2NhbCBDb25maWcgPSB7CiAgICBNYXhTdG9yZSA9IDM2MDAsCiAgICBDaGVja0ludGVydmFsID0gMiwKICAgIFRlbGVwb3J0SW50ZXJ2YWwgPSAxLAp9Cgpsb2NhbCBmdW5jdGlvbiBTZXJ2ZXJIb3AoKQogICAgbG9jYWwgUGxhY2VJZCA9IGdhbWUuUGxhY2VJZAogICAgbG9jYWwgSm9iSWQgPSBnYW1lLkpvYklkCiAgICBsb2NhbCBSb290Rm9sZGVyID0gIlNlcnZlckhvcCIKICAgIGxvY2FsIFN0b3JhZ2VGaWxlID0gUm9vdEZvbGRlciAuLiAiLyIgLi4gdG9zdHJpbmcoUGxhY2VJZCkgLi4gIi5qc29uIgogICAgbG9jYWwgRGF0YSA9IHsKICAgICAgICBTdGFydCA9IHRpY2soKSwKICAgICAgICBKb2JzID0ge30sCiAgICB9CiAgICBpZiBub3QgaXNmb2xkZXIoUm9vdEZvbGRlcikgdGhlbgogICAgICAgIG1ha2Vmb2xkZXIoUm9vdEZvbGRlcikKICAgIGVuZAogICAgaWYgaXNmaWxlKFN0b3JhZ2VGaWxlKSB0aGVuCiAgICAgICAgbG9jYWwgb2ssIE5ld0RhdGEgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHJldHVybiBIdHRwU2VydmljZTpKU09ORGVjb2RlKHJlYWRmaWxlKFN0b3JhZ2VGaWxlKSkKICAgICAgICBlbmQpCiAgICAgICAgaWYgb2sgYW5kIE5ld0RhdGEgYW5kIHRpY2soKSAtIE5ld0RhdGEuU3RhcnQgPCBDb25maWcuTWF4U3RvcmUgdGhlbgogICAgICAgICAgICBEYXRhID0gTmV3RGF0YQogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBub3QgdGFibGUuZmluZChEYXRhLkpvYnMsIEpvYklkKSB0aGVuCiAgICAgICAgdGFibGUuaW5zZXJ0KERhdGEuSm9icywgSm9iSWQpCiAgICBlbmQKICAgIHdyaXRlZmlsZShTdG9yYWdlRmlsZSwgSHR0cFNlcnZpY2U6SlNPTkVuY29kZShEYXRhKSkKICAgIGxvY2FsIFNlcnZlcnMgPSB7fQogICAgbG9jYWwgQ3Vyc29yID0gIiIKICAgIHdoaWxlIHRydWUgZG8KICAgICAgICBsb2NhbCB1cmwgPSAoImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8lZC9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9RGVzYyZsaW1pdD0xMDAmZXhjbHVkZUZ1bGxHYW1lcz10cnVlJmN1cnNvcj0lcyIpOmZvcm1hdChQbGFjZUlkLCBDdXJzb3IpCiAgICAgICAgbG9jYWwgc3VjY2VzcywgcmVzcG9uc2UgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHJldHVybiBnYW1lOkh0dHBHZXQodXJsKQogICAgICAgIGVuZCkKICAgICAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgICAgICAgbG9jYWwgZGVjb2RlU3VjY2VzcywgYm9keSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHJldHVybiBIdHRwU2VydmljZTpKU09ORGVjb2RlKHJlc3BvbnNlKQogICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGlmIGRlY29kZVN1Y2Nlc3MgYW5kIGJvZHkgYW5kIGJvZHkuZGF0YSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgc2VydmVyIGluIGlwYWlycyhib2R5LmRhdGEpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdHlwZShzZXJ2ZXIpID09ICJ0YWJsZSIKICAgICAgICAgICAgICAgICAgICAgICAgYW5kIHNlcnZlci5pZAogICAgICAgICAgICAgICAgICAgICAgICBhbmQgdG9udW1iZXIoc2VydmVyLnBsYXlpbmcpCiAgICAgICAgICAgICAgICAgICAgICAgIGFuZCB0b251bWJlcihzZXJ2ZXIubWF4UGxheWVycykKICAgICAgICAgICAgICAgICAgICAgICAgYW5kIHNlcnZlci5wbGF5aW5nIDwgc2VydmVyLm1heFBsYXllcnMKICAgICAgICAgICAgICAgICAgICAgICAgYW5kIG5vdCB0YWJsZS5maW5kKERhdGEuSm9icywgc2VydmVyLmlkKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChTZXJ2ZXJzLCBzZXJ2ZXIuaWQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIEN1cnNvciA9IGJvZHkubmV4dFBhZ2VDdXJzb3Igb3IgbmlsCiAgICAgICAgICAgICAgICBpZiBub3QgQ3Vyc29yIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbmQKICAgICAgICB0YXNrLndhaXQoQ29uZmlnLkNoZWNrSW50ZXJ2YWwpCiAgICBlbmQKICAgIGlmICNTZXJ2ZXJzID4gMCB0aGVuCiAgICAgICAgVGVsZXBvcnRTZXJ2aWNlOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKFBsYWNlSWQsIFNlcnZlcnNbbWF0aC5yYW5kb20oMSwgI1NlcnZlcnMpXSwgUGxheWVyKQogICAgZWxzZQogICAgICAgIFRlbGVwb3J0U2VydmljZTpUZWxlcG9ydChQbGFjZUlkLCBQbGF5ZXIpCiAgICBlbmQKZW5kCmdldGdlbnYoKS5TZXJ2ZXJIb3AgPSBTZXJ2ZXJIb3AKCmxvY2FsIGZ1bmN0aW9uIEF1dG9GYXJtSXRlbXMoKQogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIGdldGdlbnYoKS5TdHVmZi5BdXRvRmFybSBhbmQgQ2hhcmFjdGVyIGFuZCBIUlAgZG8KICAgICAgICAgICAgbG9jYWwgaXRlbXMgPSB3b3Jrc3BhY2UuSXRlbV9TcGF3bnMuSXRlbXM6R2V0Q2hpbGRyZW4oKQogICAgICAgICAgICBmb3IgXywgSXRlbSBpbiBwYWlycyhpdGVtcykgZG8KICAgICAgICAgICAgICAgIGlmIEl0ZW06SXNBKCJNb2RlbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBQcm9tcHQgPSBJdGVtOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiUHJveGltaXR5UHJvbXB0IikKICAgICAgICAgICAgICAgICAgICBpZiBQcm9tcHQgYW5kIFByb21wdC5NYXhBY3RpdmF0aW9uRGlzdGFuY2Ugfj0gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIEhSUC5DRnJhbWUgPSBJdGVtLlByaW1hcnlQYXJ0LkNGcmFtZSArIFZlY3RvcjMubmV3KDAsIDMsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjgpCiAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVwcm94aW1pdHlwcm9tcHQoUHJvbXB0KQogICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjYpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKbG9jYWwgZnVuY3Rpb24gQ291bnRMdWNreUFycm93cygpCiAgICBsb2NhbCBjb3VudCA9IDAKICAgIGxvY2FsIEJhY2twYWNrID0gUGxheWVyOkZpbmRGaXJzdENoaWxkKCJCYWNrcGFjayIpCiAgICBpZiBCYWNrcGFjayB0aGVuCiAgICAgICAgZm9yIF8sIHRvb2wgaW4gaXBhaXJzKEJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuTmFtZSA9PSAiTHVja3kgQXJyb3ciIHRoZW4KICAgICAgICAgICAgICAgIGNvdW50ICs9IDEKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBjb3VudAplbmQKCmxvY2FsIGZ1bmN0aW9uIEF1dG9QdXJjaGFzZUx1Y2t5QXJyb3coKQogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIGdldGdlbnYoKS5TdHVmZi5QdXJjaGFzZUx1Y2t5IGRvCiAgICAgICAgICAgIGlmIENvdW50THVja3lBcnJvd3MoKSA8IDEwIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIExpdmluZyA9IHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIikKICAgICAgICAgICAgICAgIGlmIExpdmluZyB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgVGFyZ2V0ID0gTGl2aW5nOkZpbmRGaXJzdENoaWxkKFBsYXllci5OYW1lKQogICAgICAgICAgICAgICAgICAgIGlmIFRhcmdldCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIEV2ZW50ID0gVGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJSZW1vdGVFdmVudCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIEV2ZW50IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50OkZpcmVTZXJ2ZXIoIlB1cmNoYXNlU2hvcEl0ZW0iLCB7IFsiSXRlbU5hbWUiXSA9ICIxeCBMdWNreSBBcnJvdyIgfSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHRhc2sud2FpdCgzKQogICAgICAgIGVuZAogICAgZW5kKQplbmQKCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRydWUgZG8KICAgICAgICBpZiBnZXRnZW52KCkuU3R1ZmYuQXV0b0Zhcm0gYW5kIENoYXJhY3RlciBhbmQgSFJQIHRoZW4KICAgICAgICAgICAgbG9jYWwgaXRlbXMgPSB3b3Jrc3BhY2UuSXRlbV9TcGF3bnMuSXRlbXM6R2V0Q2hpbGRyZW4oKQogICAgICAgICAgICBsb2NhbCBoYXNNb2RlbHMgPSBmYWxzZQogICAgICAgICAgICBmb3IgXywgaXRlbSBpbiBwYWlycyhpdGVtcykgZG8KICAgICAgICAgICAgICAgIGlmIGl0ZW06SXNBKCJNb2RlbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBoYXNNb2RlbHMgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgbm90IGhhc01vZGVscyB0aGVuCiAgICAgICAgICAgICAgICBIUlAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygyOTgsIC0zMywgMTY1KQogICAgICAgICAgICAgICAgZm9yIGk9MCw0IGRvCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGdldGdlbnYoKS5TZXJ2ZXJIb3AoKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgdGFzay53YWl0KDEpCiAgICBlbmQKZW5kKQoKVGVsZXBvcnRCeXBhc3MoKQpJdGVtTWFnbml0dWRlQnlwYXNzKCkKQ3Jhc2hCeXBhc3MoKQpBdXRvRmFybUl0ZW1zKCkKUmFuZG9tRXF1aXBUb29sKCkKQXV0b1NlbGwoKQpBdXRvUHVyY2hhc2VMdWNreUFycm93KCkKCmxvY2FsIGZ1bmN0aW9uIFByZXNzUGxheSgpCiAgICBpZiBQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSZW1vdGVFdmVudCIpIHRoZW4KICAgICAgICBQbGF5ZXIuQ2hhcmFjdGVyLlJlbW90ZUV2ZW50OkZpcmVTZXJ2ZXIoIlByZXNzZWRQbGF5IikKICAgIGVuZAplbmQKCnRhc2suZGVsYXkoNSwgUHJlc3NQbGF5KQoKUGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24obmV3Q2hhcikKICAgIENoYXJhY3RlciA9IG5ld0NoYXIKICAgIEhSUCA9IG5ld0NoYXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIEh1bWFub2lkID0gbmV3Q2hhcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKICAgIEF1dG9GYXJtSXRlbXMoKQogICAgUmFuZG9tRXF1aXBUb29sKCkKICAgIEF1dG9TZWxsKCkKICAgIEF1dG9QdXJjaGFzZUx1Y2t5QXJyb3coKQogICAgdGFzay5kZWxheSg1LCBQcmVzc1BsYXkpCmVuZCkK"))()
